Third Module of Arnia Project - Wexer Psi Backend
Project Specifications ‚¨á

Class: T32022
Project Type: Patient and Medical Records Manager
Delivery Date: 07/30/23

üü£ Good luck with the project! üü£

First - Start:
    Github:
        ‚úî Initialize repository on Github; @done(23-07-04 04:51)
        ‚úî Create staging branch; @done(23-07-04 04:51)
        ‚úî TODO: Each planning section is a branch; @done(23-07-04 04:51)
        ‚úî TODO: Each task is a commit; @done(23-07-04 04:51)
    Docs:
        ‚úî Is planning ready? @done(23-07-04 04:51)
        ‚úî Project documentation - start; @done(23-07-04 04:51)
        ‚úî Create .env.example file; @done(23-07-04 05:10)
    Node.js:
        ‚úî Initialize Node project; @done(23-07-04 16:44)
        ‚úî Install libraries: @done(23-07-04 21:43)
        Hint: You can install more than one at a time.
            ‚úî Express; @done(23-07-04 16:45)
            ‚úî Mongoose; @done(23-07-04 16:45)
            ‚úî Typescript; @done(23-07-04 16:45)
            ‚úî Dotenv; @done(23-07-04 16:45)
            ‚úî Yup; @done(23-07-04 21:43)
            ‚úî Jest; @done(23-07-04 21:43)
            ‚úî Bcrypt; @done(23-07-04 21:43)
            ‚úî Jsonwebtoken; @done(23-07-04 21:43)
            ‚úî ts-node-dev; @done(23-07-04 16:46)
            ‚úî multer; @done(23-07-04 21:43)
        ‚úî Install types: @done(23-07-04 21:43)
            ‚úî @types/node; @done(23-07-04 16:45)
            ‚úî @types/express; @done(23-07-04 16:45)
            ‚úî @types/jest; @done(23-07-04 21:43)
            ‚úî @types/bcrypt; @done(23-07-04 21:43)
            ‚úî @types/jsonwebtoken; @done(23-07-04 21:43)
            ‚úî @types/multer; @done(23-07-04 21:43)
        ‚úî Configure tsconfig.json: @done(23-07-04 17:27)
        ‚úî Configure `npm run dev`("dev": "tsnd src/server.ts"); @done(23-07-04 16:49)
        ‚úî Configure Environment Variables; @done(23-07-04 17:27)
        ‚úî Create a collection in Insomnia; @done(23-07-04 19:11)
    Express.js:
        ‚úî Create server.ts file in the src folder of the project; @done(23-07-04 19:11)
        ‚úî Initialize Express server; @done(23-07-04 19:11)
    MongoDB | Mongoose:
        ‚úî Define MongoDB URL in the .env file; @done(23-07-04 21:45)
        ‚úî Create a database folder and a config.ts file; @done(23-07-04 21:47) 
        obs: It's db.ts the database config file.
        update(2023-07-10): I'm deleting this folder and putting the mongo connection at configs/databaseConfig.ts
        ‚úî Initialize database connection; @done(23-07-04 21:47)
Second - Folder Creation | Entity Sketches:
    ‚úî branch creation - second_folders; @done(23-07-04 23:00)
    Folders:
        ‚úî root (dotenv | package.json | tsconfig | gitignore | node_modules | uploads) @done(23-07-04 23:01)
            ‚úî src (app | database | routes | server.ts file | utils | middlewares) @done(23-07-04 23:02)
    App Folder:
        Legend: *these words are very long*
            con -> controllers
            ser -> services
            rep -> repositories
            ent -> entities
            fac -> factories
            mod -> module

        Note: Each task in this section is a folder. Inside the parentheses are the files in that folder.

        ‚úî Auth (con|dtos|schemas|ser|mod); @done(23-07-04 23:11)
        Note: The repository to be used with the Auth service is the Doctor repository.
        ‚úî User|Doctor:(con|dtos|ent|fac|mapper|rep|schema|ser|mod) @done(23-07-05 00:06)
        Note: I'll use the word Doctor for User.
        ‚úî Patient;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        ‚úî Timeline;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        ‚úî Occurrence;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        ‚úî File;(con|dtos|ent|rep|schemas|fac|ser|mod) @done(23-07-05 00:32)
    ‚úî Merge branch and delete; @done(23-07-05 00:43)
Third - Middlewares | Models | Interfaces | DTOs:
    ‚úî branch creation - third_middlewares; @done(23-07-05 00:46)
    Middlewares:
        ‚úî Authentication verification middleware; @done(23-07-10 16:47)
        ‚úî File upload middleware; @done(23-07-10 18:33)
        note: I have no idea what is this. Hope won't miss this in the future.
        ‚úî Create configs folder; @done(23-07-10 17:22)
        ‚úî Storage Configuration File; @done(23-07-10 17:14)
    Functions:
        Note: Where to put this function? utils, maybe.
        ‚úî Error handling function; @done(23-07-10 16:48)
        ‚úî encrypt data; @done(23-07-10 17:08)
        ‚úî Token Verification Class; @done(23-07-10 16:28)
    Entity Modeling:
        ‚úî Yup validation schema in the Controller;////// @done(23-07-11 17:07)
        ‚úî Mongoose schema and model;////// @done(23-07-11 20:01)
        ‚úî DTO for "inter-layer communication";////// @done(23-07-11 18:26)
        TODO: Find a better definition term.
        ‚úî Don't forget the module, which creates everything;////// @done(23-07-11 21:04)
        Note: The module will be used in the entity routes to initiate the controller with its dependencies.
        Counter:
            ‚úî Auth; @done(23-07-11 21:04)
            ‚úî Doctor; @done(23-07-10 23:07)
            ‚úî Patient; @done(23-07-11 21:04)
            ‚úî Timeline; @done(23-07-11 21:05)
            ‚úî Occurrence; @done(23-07-11 21:05)
            ‚úî File; @done(23-07-11 21:05)
    ‚úî Make a routes testing; @done(23-07-11 15:40)
    ‚úî Read all the files to check if there is any mistakes; @done(23-07-12 16:42)
    ‚úî Merge and delete branch; @done(23-07-12 16:53)
Fourth - Layers | Routes:
    ‚úî create branch - fourth_layers @done(23-07-12 16:53)
    Connecting the Layers:
        ‚úî /routes -> (http-req | middleware | controller dependency) @done(23-07-12 19:51)
        ‚úî -> controller -> (yup validation | response return | service dependency) @done(23-07-12 20:33)
        ‚úî -> service -> (all logic | error layer | repository dependency) @done(23-07-12 21:45)
        ‚úî -> repository \ (mongoose functions | populate | model dependency) @done(23-07-12 22:20)
    Counter:
        ‚úî Auth; @done(23-07-12 21:59)
        ‚úî Doctor; @done(23-07-10 23:07)
        ‚úî Patient; @done(23-07-12 22:20)
        ‚úî Timeline; @done(23-07-12 22:20)
        ‚úî Occurrence; @done(23-07-12 22:21)
        ‚úî File; @done(23-07-12 22:21)
    ‚úî Merge and delete branch; @done(23-07-12 22:49)
Fifth - Features:
    Note: The next section is for entity relations. I might be wrong, but I found it easier this way.
    ‚úî create branch - fifty_features @done(23-07-12 22:50)
    Functions:
        ‚úî Create a utils function - newSuccess @done(23-07-13 20:37)
        ‚úî Create a utils function - ServerError @done(23-07-13 20:37)

        ‚úî Auth Routes; @done(23-07-13 23:22)
        ‚úî Auth Controller; @done(23-07-13 23:22)
        ‚úî Auth Service; @done(23-07-13 23:22)
        ‚úî Auth uses the Doctor repository; @done(23-07-13 23:22)
        
        ‚úî Create Doctor; @done(23-07-10 23:08)
        ‚úî Rebuild create Doctor; @done(23-07-13 23:33)
        ‚úî Find Doctor - just noting; @done(23-07-13 23:23)
        ‚úî Find All Doctors; @done(23-07-13 23:23)
        ‚úî Find by email - just noting; @done(23-07-10 23:08)

        ‚úî Stoped at auth middleware; @est(2023-07-14 23:59) @done(23-07-14 15:40)
        ‚úî How I know that the user is with his correct token? @done(23-07-14 15:39)
        ‚úò PARAMS! forget this! @cancelled(23-07-14 15:40)

        ‚úî Add pagination to GET - extra; @done(23-07-14 20:11)
        ‚úî Authentication; @done(23-07-14 15:40)
        ‚úî Update Doctor; @done(23-07-14 18:53)
        ‚úî Delete Doctor; @done(23-07-14 18:53)
        ‚òê Profile picture - extra;
        ‚úî pushPatient function; @done(23-07-17 20:45)

        ‚úî *take a breath and keep going* @done(23-07-17 20:45)

        ‚úî Create patient -> relationship with Doctor; @done(23-07-17 20:45)
        ‚úî Find patient by id; @done(23-07-17 22:58)
        ‚úî Update patient; @done(23-07-17 22:58)
        ‚úî Delete patient - extra; @done(23-07-17 22:58)
        
        ‚úî Put the getOne Doctor back at his place; @done(23-07-17 22:03)

        ‚òê Find all patients of a Doctor;
        To achive this I need to place the current doctor Id at the patient. 
        I CAN'T BELIEVE I FORGOT THIS!!!!
        Please, tomorrow-jessie: fix this. Thanks
        ‚òê Add pagination to GET - extra;
        ‚òê PushTimeline;

        ‚òê *take another breath*
        
        ‚òê Create timeline -> relationship with a Patient;
        ‚òê Find all timelines of a Patient;
        ‚òê Add pagination to GET - extra;
        ‚òê Find timeline by id;
        ‚òê Update timeline;
        ‚òê Delete timeline - extra;
        ‚òê pushOccurrence

        ‚òê *now it's easier*

        ‚òê Create occurrence -> relationship with a Timeline;
        ‚òê Find all occurrences of a Timeline;
        ‚òê Add pagination to GET - extra;
        ‚òê Find occurrences by id;
        ‚òê Update occurrences;
        ‚òê Delete occurrences - extra;
        ‚òê pushFile

        Note: File entity is extra.
        ‚òê Create a file -> relationship with Doctor and Occurrence;
        ‚òê Associate a file with a Doctor - extra;
        Note: The file has a relationship with the Doctor because of the profile picture and with the occurrence because of the patient's attachments.
        
        Note: These are ideas - not in the briefing.
        ‚òê Find all files of a Doctor;
        ‚òê Associate a file with Occurrence;
        ‚òê Find all files of an Occurrence;
        ‚òê Find all files of a Patient;
        Note: It seems difficult, but use query for this.
        ‚òê Delete a file;
        ‚òê Build the Doctor Mapper

        ‚òê Trocar TODAS as palavras "Doctor" para "Psychology". QUE REEEIVAAAA!
        ‚òê Testar todas as pagina√ß√µes. OUTRA REEEEIVA!

    Counter:
        ‚úî Auth; @done(23-07-13 23:01)
        ‚úî Doctor; @done(23-07-17 23:01)
        ‚òê Patient;
        ‚òê Timeline;
        ‚òê Occurrence;
        ‚òê File;
    ‚òê merge and delete the fudging branch;
Sixth - Relationships (<- Hardest part!):
    ‚òê create branch - sixth_relations
    ‚òê Who with whom?
    _Relationships_:
        ‚òê Doctor - Main Entity, Parent of Patient and File;
        ‚òê Patient - Child of Doctor and Parent of Timeline;
        ‚òê Timeline - Child of Patient and Parent of Occurrences;
        ‚òê Occurrences - Child of Timeline and Parent of File;
        ‚òê File - Child of Doctor and Occurrences;
        Remember: Each time a child entity is created, the parent entity is updated with { parentId, {$push: childId}}
    ‚òê merge and delete... you know!
Seventh - Jest:
    ‚òê create branch - seventh_tests
    Initialization:
        ‚òê Configure jest;
        ‚òê Add jest execution snippet to the script;
        Note: Not sure if jest.config.ts file needs to be created.
    Testing - Controllers, Services, and Repositories Layers:
        ‚òê First Step - Preparation;
        ‚òê Second Step - Execution;
        ‚òê Third Step - Expected Result;
        ‚òê Test for success and check if all assertions are correct;
        Tip: It's not a rule, but each return can be a separate test.
        ‚òê That's it. You can do it =)
    Counter:
        Note: Coverage should be 70% for each layer.
        Controller:
            ‚òê Auth;
            ‚òê Doctor;
            ‚òê Patient;
            ‚òê Timeline;
            ‚òê Occurrence;
            ‚òê File;
        Service:
            ‚òê Auth;
            ‚òê Doctor;
            ‚òê Patient;
            ‚òê Timeline;
            ‚òê Occurrence;
            ‚òê File;
        Repository:
            ‚òê Auth;
            ‚òê Doctor;
            ‚òê Patient;
            ‚òê Timeline;
            ‚òê Occurrence;
            ‚òê File;
        Supertest:
            Note: This supertest is optional.
            ‚òê Integration test on a user route with supertest;
Eighth - Finalization:
    Deploy:
        ‚òê Railway account;
    Documentation:
        ‚òê Finish documentation;
    ‚òê Review:
        ‚òê Padr√£o REST - revisar a entidade doctor;
        ‚òê Query atrav√©s de params? Seria maneiro!

Extras_ToDo:
    ‚òê Clean Architecture;
    ‚òê Port/Adapter;
    ‚òê Hexagonal Architecture;
    ‚òê Better folder structure -> 03.2-http-3 -> user;
    ‚òê Soft Delete;
    ‚òê Mapper - link to files;
    ‚úî Pagination; @done(23-07-17 20:44)
    ‚òê Request typing -> use the revision exercise;
    ‚òê Config babel - watch the july, 7th video;