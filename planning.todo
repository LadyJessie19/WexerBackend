Third Module of Arnia Project - Wexer Psi Backend
Project Specifications â¬‡

Class: T32022
Project Type: Patient and Medical Records Manager
Delivery Date: 07/30/23

ðŸŸ£ Good luck with the project! ðŸŸ£

First - Start:
    Github:
        âœ” Initialize repository on Github; @done(23-07-04 04:51)
        âœ” Create staging branch; @done(23-07-04 04:51)
        âœ” TODO: Each planning section is a branch; @done(23-07-04 04:51)
        âœ” TODO: Each task is a commit; @done(23-07-04 04:51)
    Docs:
        âœ” Is planning ready? @done(23-07-04 04:51)
        âœ” Project documentation - start; @done(23-07-04 04:51)
        âœ” Create .env.example file; @done(23-07-04 05:10)
    Node.js:
        âœ” Initialize Node project; @done(23-07-04 16:44)
        âœ” Install libraries: @done(23-07-04 21:43)
        Hint: You can install more than one at a time.
            âœ” Express; @done(23-07-04 16:45)
            âœ” Mongoose; @done(23-07-04 16:45)
            âœ” Typescript; @done(23-07-04 16:45)
            âœ” Dotenv; @done(23-07-04 16:45)
            âœ” Yup; @done(23-07-04 21:43)
            âœ” Jest; @done(23-07-04 21:43)
            âœ” Bcrypt; @done(23-07-04 21:43)
            âœ” Jsonwebtoken; @done(23-07-04 21:43)
            âœ” ts-node-dev; @done(23-07-04 16:46)
            âœ” multer; @done(23-07-04 21:43)
        âœ” Install types: @done(23-07-04 21:43)
            âœ” @types/node; @done(23-07-04 16:45)
            âœ” @types/express; @done(23-07-04 16:45)
            âœ” @types/jest; @done(23-07-04 21:43)
            âœ” @types/bcrypt; @done(23-07-04 21:43)
            âœ” @types/jsonwebtoken; @done(23-07-04 21:43)
            âœ” @types/multer; @done(23-07-04 21:43)
        âœ” Configure tsconfig.json: @done(23-07-04 17:27)
        âœ” Configure `npm run dev`("dev": "tsnd src/server.ts"); @done(23-07-04 16:49)
        âœ” Configure Environment Variables; @done(23-07-04 17:27)
        âœ” Create a collection in Insomnia; @done(23-07-04 19:11)
    Express.js:
        âœ” Create server.ts file in the src folder of the project; @done(23-07-04 19:11)
        âœ” Initialize Express server; @done(23-07-04 19:11)
    MongoDB | Mongoose:
        âœ” Define MongoDB URL in the .env file; @done(23-07-04 21:45)
        âœ” Create a database folder and a config.ts file; @done(23-07-04 21:47) 
        obs: It's db.ts the database config file.
        update(2023-07-10): I'm deleting this folder and putting the mongo connection at configs/databaseConfig.ts
        âœ” Initialize database connection; @done(23-07-04 21:47)
Second - Folder Creation | Entity Sketches:
    âœ” branch creation - second_folders; @done(23-07-04 23:00)
    Folders:
        âœ” root (dotenv | package.json | tsconfig | gitignore | node_modules | uploads) @done(23-07-04 23:01)
            âœ” src (app | database | routes | server.ts file | utils | middlewares) @done(23-07-04 23:02)
    App Folder:
        Legend: *these words are very long*
            con -> controllers
            ser -> services
            rep -> repositories
            ent -> entities
            fac -> factories
            mod -> module

        Note: Each task in this section is a folder. Inside the parentheses are the files in that folder.

        âœ” Auth (con|dtos|schemas|ser|mod); @done(23-07-04 23:11)
        Note: The repository to be used with the Auth service is the User repository.
        âœ” User|User:(con|dtos|ent|fac|mapper|rep|schema|ser|mod) @done(23-07-05 00:06)
        Note: I'll use the word User for User. NO!!!!!
        âœ” Patient;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        âœ” Timeline;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        âœ” Occurrence;(con|dtos|ent|rep|fac|schemas|ser|mod) @done(23-07-05 00:32)
        âœ” File;(con|dtos|ent|rep|schemas|fac|ser|mod) @done(23-07-05 00:32)
    âœ” Merge branch and delete; @done(23-07-05 00:43)
Third - Middlewares | Models | Interfaces | DTOs:
    âœ” branch creation - third_middlewares; @done(23-07-05 00:46)
    Middlewares:
        âœ” Authentication verification middleware; @done(23-07-10 16:47)
        âœ” File upload middleware; @done(23-07-10 18:33)
        note: I have no idea what is this. Hope won't miss this in the future.
        âœ” Create configs folder; @done(23-07-10 17:22)
        âœ” Storage Configuration File; @done(23-07-10 17:14)
    Functions:
        Note: Where to put this function? utils, maybe.
        âœ” Error handling function; @done(23-07-10 16:48)
        âœ” encrypt data; @done(23-07-10 17:08)
        âœ” Token Verification Class; @done(23-07-10 16:28)
    Entity Modeling:
        âœ” Yup validation schema in the Controller;////// @done(23-07-11 17:07)
        âœ” Mongoose schema and model;////// @done(23-07-11 20:01)
        âœ” DTO for "inter-layer communication";////// @done(23-07-11 18:26)
        TODO: Find a better definition term.
        âœ” Don't forget the module, which creates everything;////// @done(23-07-11 21:04)
        Note: The module will be used in the entity routes to initiate the controller with its dependencies.
        Counter:
            âœ” Auth; @done(23-07-11 21:04)
            âœ” User; @done(23-07-10 23:07)
            âœ” Patient; @done(23-07-11 21:04)
            âœ” Timeline; @done(23-07-11 21:05)
            âœ” Occurrence; @done(23-07-11 21:05)
            âœ” File; @done(23-07-11 21:05)
    âœ” Make a routes testing; @done(23-07-11 15:40)
    âœ” Read all the files to check if there is any mistakes; @done(23-07-12 16:42)
    âœ” Merge and delete branch; @done(23-07-12 16:53)
Fourth - Layers | Routes:
    âœ” create branch - fourth_layers @done(23-07-12 16:53)
    Connecting the Layers:
        âœ” /routes -> (http-req | middleware | controller dependency) @done(23-07-12 19:51)
        âœ” -> controller -> (yup validation | response return | service dependency) @done(23-07-12 20:33)
        âœ” -> service -> (all logic | error layer | repository dependency) @done(23-07-12 21:45)
        âœ” -> repository \ (mongoose functions | populate | model dependency) @done(23-07-12 22:20)
    Counter:
        âœ” Auth; @done(23-07-12 21:59)
        âœ” User; @done(23-07-10 23:07)
        âœ” Patient; @done(23-07-12 22:20)
        âœ” Timeline; @done(23-07-12 22:20)
        âœ” Occurrence; @done(23-07-12 22:21)
        âœ” File; @done(23-07-12 22:21)
    âœ” Merge and delete branch; @done(23-07-12 22:49)
Fifth - Features:
    Note: The next section is for entity relations. I might be wrong, but I found it easier this way.
    âœ” create branch - fifty_features @done(23-07-12 22:50)
    Functions:
        âœ” Create a utils function - newSuccess @done(23-07-13 20:37)
        âœ” Create a utils function - ServerError @done(23-07-13 20:37)

        âœ” Auth Routes; @done(23-07-13 23:22)
        âœ” Auth Controller; @done(23-07-13 23:22)
        âœ” Auth Service; @done(23-07-13 23:22)
        âœ” Auth uses the User repository; @done(23-07-13 23:22)
        
        âœ” Create User; @done(23-07-10 23:08)
        âœ” Rebuild create User; @done(23-07-13 23:33)
        âœ” Find User - just noting; @done(23-07-13 23:23)
        âœ” Find All Users; @done(23-07-13 23:23)
        âœ” Find by email - just noting; @done(23-07-10 23:08)

        âœ” Stoped at auth middleware; @est(2023-07-14 23:59) @done(23-07-14 15:40)
        âœ” How I know that the user is with his correct token? @done(23-07-14 15:39)
        âœ˜ PARAMS! forget this! @cancelled(23-07-14 15:40)

        âœ” Add pagination to GET - extra; @done(23-07-14 20:11)
        âœ” Authentication; @done(23-07-14 15:40)
        âœ” Update User; @done(23-07-14 18:53)
        âœ” Delete User; @done(23-07-14 18:53)
        âœ” pushPatient function; @done(23-07-17 20:45)

        âœ” *take a breath and keep going* @done(23-07-17 20:45)

        âœ” Create patient -> relationship with User; @done(23-07-17 20:45)
        âœ” Find patient by id; @done(23-07-17 22:58)
        âœ” Update patient; @done(23-07-17 22:58)
        âœ” Delete patient - extra; @done(23-07-17 22:58)
        
        âœ” Put the getOne User back at his place; @done(23-07-17 22:03)

        âœ” Find all patients of a User; @done(23-07-18 19:27)
        To achive this I need to place the current User Id at the patient. 
        I CAN'T BELIEVE I FORGOT THIS!!!!
        Please, tomorrow-jessie: fix this. Thanks
        âœ” Add pagination to GET - extra; @done(23-07-18 19:27)
        âœ” PushTimeline; @done(23-07-18 19:27)

        âœ” Trocar TODAS as palavras "Doctor" para "User". QUE REEEIVAAAA! @done(23-07-18 20:27)
            âœ” server.ts @done(23-07-18 19:33)
            âœ” utils @done(23-07-18 19:33)
            âœ” routes @done(23-07-18 19:39)
            âœ” middlewares @done(23-07-18 19:42)
            âœ” configs @done(23-07-18 19:42)
            âœ” app @done(23-07-18 20:27)
                âœ” Auth @done(23-07-18 19:42)
                âœ” User. grrrrrrrrrr!!!! @done(23-07-18 20:27)
                âœ” Patient @done(23-07-18 19:56)

        âœ” Testar todas as paginaÃ§Ãµes. OUTRA REEEEIVA! @done(23-07-20 10:09)
        âœ” Fazer um utils de paginaÃ§Ã£o!!!! @done(23-07-20 10:09)

        âœ” *take another breath* @done(23-07-20 10:11)
        
        âœ” Create timeline -> relationship with a Patient; @done(23-07-19 00:22)
        âœ” Find all timelines of a Patient; @done(23-07-20 10:09)
        note: Problems! Problems!
        âœ” Add pagination to GET - extra; @done(23-07-20 10:09)
        âœ” Find timeline by id; @done(23-07-19 00:23)
        âœ” Update timeline; @done(23-07-19 00:23)
        âœ” Delete timeline - extra; @done(23-07-19 00:24)
        âœ” pushOccurrence @done(23-07-19 00:23)

        âœ” *now it's easier* @done(23-07-20 10:11)

        âœ” Create occurrence -> relationship with a Timeline; @done(23-07-20 14:07)
        âœ” Find all occurrences of a Timeline; @done(23-07-20 14:07)
        âœ” Add pagination to GET - extra; @done(23-07-20 14:08)
        âœ” Find occurrences by id; @done(23-07-20 14:08)
        âœ” Update occurrences; @done(23-07-20 14:08)
        âœ” Delete occurrences - extra; @done(23-07-20 14:08)
        âœ” pushFile @done(23-07-20 14:08)

        Note: File entity is extra.
        âœ” Create a file -> relationship with User and Occurrence; @done(23-07-21 22:43)
        âœ˜ Associate a file with a User - extra; @cancelled(23-07-21 22:43)
        Note: The file has a relationship with the User because of the profile picture and with the occurrence because of the patient's attachments.
        
        Note: These are ideas - not in the briefing.
        âœ” Associate a file with Occurrence; @done(23-07-21 22:43)
        âœ” Find all files of an Occurrence; @done(23-07-21 22:43)
        âœ” Delete a file; @done(23-07-21 22:43)
        âœ” Build the User Mapper @done(23-07-21 22:43)
        âœ˜ Find all files of a Patient; @cancelled(23-07-21 22:43)
        Note: It seems difficult, but use query for this.
        âœ˜ Find all files of a User; @cancelled(23-07-21 22:43)

    Counter:
        âœ” Auth; @done(23-07-13 23:01)
        âœ” User; @done(23-07-17 23:01)
        âœ” Patient; @done(23-07-18 19:28)
        âœ” Timeline; @done(23-07-20 10:09)
        âœ” Occurrence; @done(23-07-20 14:09)
        âœ” File; @done(23-07-22 01:16)
    âœ” merge and delete the fudging branch; @done(23-07-22 01:16)
    
    _Relationships_:
        âœ” User - Main Entity, Parent of Patient and File; @done(23-07-20 10:10)
        âœ” Patient - Child of User and Parent of Timeline; @done(23-07-20 10:10)
        âœ” Timeline - Child of Patient and Parent of Occurrences; @done(23-07-20 10:10)
        âœ” Occurrences - Child of Timeline and Parent of File; @done(23-07-20 14:19)
        âœ” File - Child of User and Occurrences; @done(23-07-21 22:43)
        Remember: Each time a child entity is created, the parent entity is updated with { parentId, {$push: childId}}

Sixth - Finalizations:
    âœ” File Middleware; @done(23-07-21 22:43)
    âœ” Consertar as paginaÃ§Ãµes; @done(23-07-20 10:09)
    âœ” Query atravÃ©s de params? Seria maneiro! @done(23-07-20 10:10)
    âœ” Ver a melhor forma de usar o middleware de auth @done(23-07-21 22:43)
    âœ” Clean this .todo!!! It's so messy! @done(23-07-21 22:43)
    âœ” One full test to all the entities and layers @done(23-07-22 01:39)
    âœ˜ Eu devo fazer "getOneFromParent" na entidade file? @cancelled(23-07-21 22:43)
    
    âœ” create branch - sixth_finalizations @done(23-07-27 20:56)

    âœ” The message getOnePsychologist is missing "was"; @done(23-07-27 20:56)
    âœ” The update function needs to be fixed; @done(23-07-28 00:03)

    âœ” Perguntar: @done(23-07-27 20:21)
        âœ” Tipagem do teste - babel @done(23-07-27 20:01)
        âœ” Teste ok? @done(23-07-27 20:21)
        âœ” Delete trycatch; @done(23-07-27 20:21)
        âœ” coverage: porcentagem? @done(23-07-27 20:21)

    Quick_Tasks:
        âœ” PadrÃ£o REST - revisar a entidade User; @done(23-07-28 03:09)
        âœ” trocars os "user" por "result"; @done(23-07-28 03:09)
        âœ˜ Fazer um mÃ©todo para aparecer o link da foto quando o usuÃ¡rio for buscado. @cancelled(23-07-28 03:04)
        âœ” Remover tudo sobre file da entidade user. @done(23-07-28 03:15)
        
    Every_Entities_Tasks:
        âœ” Revisar os cÃ³digos das requisiÃ§Ãµes; @done(23-07-28 03:20)
        âœ” Consertar as validaÃ§Ãµes das rotas get, update e delete. @done(23-07-28 00:48)
        âœ” As rotas de update precisam ser melhoradas. Yup sem nada obrigatÃ³rio. @done(23-07-28 00:24)
        âœ” Erro de delete - id de outra coleÃ§Ã£o - msg de sucesso; @done(23-07-28 00:24)
            
    Larger_Tasks:
        âœ˜ Profile picture - extra; @cancelled(23-07-28 03:09)
        
    Professor_Help:
        âœ˜ Tentar consertar a tipagem do FileMapper: droga de any! @cancelled(23-07-26 22:20)
        âœ” Como remover o id da entidade pai quando ele for deletado? @done(23-07-28 02:42)
        â˜ Consertar o @types da tipagem de Request - AuthMiddleware
        
    Last_Tasks:
        âœ” tsconfig.json @done(23-07-28 03:41)
        âœ” Configurar babel; @done(23-07-28 03:41)
        âœ” Factory pattern; @done(23-07-28 04:23)
        â˜ Consertar o lugar onde fazer o express.static;
        â˜ Fazer o merge com a main e testar o deploy
        â˜ Fazer um mÃ©todo para aparecer o link da foto quando a ocorrÃªncia for buscada.
        â˜ O link para o link nÃ£o estÃ¡ funcionando. BUAAAA!

        âœ” Consertar as tipagens dos schemas @done(23-07-28 03:48)
        âœ˜ Consertar os dtos de create--- nas features @cancelled(23-07-28 03:53)

    â˜ merge and delete... you know!

Seventh - Jest:
    âœ” create branch - seventh_tests @done(23-07-26 18:52)
    Initialization:
        âœ” Configure jest; @done(23-07-26 22:19)
        âœ” Config babel - watch the july, 7th video; @done(23-07-28 03:22)
        âœ” Add jest execution snippet to the script; @done(23-07-26 22:19)
        Note: Not sure if jest.config.ts file needs to be created.
    Testing - Controllers, Services, and Repositories Layers:
        First Step - Preparation;
        Second Step - Execution;
        Third Step - Expected Result;
        Test for success and check if all assertions are correct;
        Tip: It's not a rule, but each return can be a separate test.
        That's it. You can do it =)
    Counter:
        Note: Coverage should be 70% for each layer.
        Service:
            â˜ Auth;
            â˜ User;
            â˜ Patient;
            â˜ Timeline;
            â˜ Occurrence;
            â˜ File;
        Note: The controller and service layers are optional.
        Supertest:
            Note: This supertest is optional.
            âœ˜ Integration test on a user route with supertest; @cancelled(23-07-28 03:24)
Eighth - Finalization:
    Deploy:
        âœ” Railway account; @done(23-07-26 22:20)
        âœ” Set all the env var; @done(23-07-26 22:20)
        âœ” Deploy the project; @done(23-07-26 22:20)
        âœ” Test all the requisitions - the server is Railway(I think...); @done(23-07-26 22:20)
    Documentation:
        â˜ Finish documentation;
            âœ˜ Explain the declare global at MainRouter; @cancelled(23-07-28 03:24)
            âœ˜ Explicar o any da funÃ§Ã£o de paginaÃ§Ã£o! @cancelled(23-07-28 03:24)

Extras_ToDo:
    âœ” Clean Architecture; @done(23-07-21 22:45)
    âœ” Port/Adapter; @done(23-07-21 22:45)
    âœ” Hexagonal Architecture; @done(23-07-21 22:44)
    âœ” Better folder structure -> 03.2-http-3 -> user; @done(23-07-21 22:45)
    âœ” Mapper - link to files; @done(23-07-21 22:44)
    âœ” Pagination; @done(23-07-17 20:44)
    âœ” Request typing -> use the revision exercise; @done(23-07-21 22:44)
    âœ˜ Soft Delete; @cancelled(23-07-21 22:44)
